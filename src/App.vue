<script setup>
import { RouterView } from 'vue-router';
import './assets/js/background.js';
import { onMounted } from 'vue';

onMounted(()=>{
  const welcome = document.querySelector(".welcome-text");
  welcome.addEventListener("animationend", () => {
    document.getElementById('welcome').classList.add("invisible");
    console.log('test')
  });
})
</script>

<template>
  <div id="welcome" class="welcome col-12 text-center d-flex justify-content-center align-items-center">
      <svg class="welcome-text" width="382" height="75" viewBox="0 0 382 75" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M53.568 7.472L53.472 8.72C51.04 27.408 49.44 38.928 48.672 43.28C47.392 50.448 46.752 55.92 46.752 59.696C46.752 63.408 48.352 65.264 51.552 65.264C54.24 65.264 56.64 63.344 58.752 59.504C60.864 55.6 62.464 50.768 63.552 45.008C65.792 32.976 66.912 22.576 66.912 13.808C66.912 9.712 66.56 6.16 65.856 3.152C68.416 1.616 71.488 0.847998 75.072 0.847998C78.656 0.847998 80.448 2.96 80.448 7.184C80.448 13.776 79.424 23.792 77.376 37.232C75.712 48.432 73.408 56.656 70.464 61.904C69.12 64.144 67.584 66.288 65.856 68.336C62.272 72.496 57.248 74.576 50.784 74.576C44.384 74.576 39.808 71.824 37.056 66.32C33.536 71.824 28.192 74.576 21.024 74.576C16.416 74.576 12.832 73.264 10.272 70.64C7.776 67.952 6.528 64.4 6.528 59.984C6.528 59.408 6.592 58.544 6.72 57.392L10.272 30.32C3.424 25.392 0 19.856 0 13.712C0 9.808 1.344 6.704 4.032 4.4C6.72 2.096 9.984 0.943996 13.824 0.943996C22.208 0.943996 26.4 5.104 26.4 13.424C26.4 13.552 26.368 13.712 26.304 13.904C26.304 14.096 26.272 14.416 26.208 14.864C26.208 15.248 26.144 15.728 26.016 16.304C25.952 16.816 25.824 17.616 25.632 18.704C25.504 19.792 25.344 21.008 25.152 22.352C24.96 23.632 24.704 25.36 24.384 27.536C24.064 29.712 23.712 32.08 23.328 34.64C23.008 37.136 22.592 40.208 22.08 43.856C21.568 47.504 21.12 50.608 20.736 53.168C20.352 55.728 20.16 57.584 20.16 58.736C20.16 63.024 21.824 65.168 25.152 65.168C29.76 65.168 32.608 60.976 33.696 52.592L39.84 4.112C41.952 3.152 44.48 2.672 47.424 2.672C51.52 2.672 53.568 4.272 53.568 7.472ZM10.08 8.62399C8.864 8.62399 7.968 9.07199 7.392 9.96799C6.816 10.864 6.528 11.888 6.528 13.04C6.528 15.92 8.128 18.896 11.328 21.968L11.808 18.128C12.064 16.016 12.192 13.904 12.192 11.792C12.256 9.68 11.552 8.62399 10.08 8.62399ZM100.43 52.496C104.398 51.664 107.342 50.064 109.262 47.696C111.246 45.328 112.238 43.056 112.238 40.88C112.238 38.64 111.63 37.136 110.414 36.368C109.262 35.536 107.982 35.12 106.574 35.12C103.566 35.12 100.91 36.816 98.6063 40.208C96.3663 43.536 95.2463 47.536 95.2463 52.208C95.2463 56.816 96.3343 60.272 98.5103 62.576C100.75 64.816 103.502 65.936 106.766 65.936C111.566 65.936 116.174 64.272 120.59 60.944C125.006 57.616 128.59 53.264 131.342 47.888C132.75 49.232 134.03 50.896 135.182 52.88C133.07 57.68 129.326 62.384 123.95 66.992C121.262 69.232 118.062 71.056 114.35 72.464C110.702 73.872 106.926 74.576 103.022 74.576C96.6223 74.576 91.5663 72.624 87.8543 68.72C83.8863 64.496 81.9023 59.088 81.9023 52.496C81.9023 45.904 84.3663 40.144 89.2943 35.216C94.2863 30.288 100.238 27.824 107.15 27.824C112.078 27.824 116.078 28.912 119.15 31.088C122.222 33.2 123.79 36.08 123.854 39.728C123.854 44.656 121.87 48.656 117.902 51.728C113.998 54.8 108.622 56.944 101.774 58.16L100.43 52.496ZM140.157 74.672C136.253 74.672 133.181 73.584 130.941 71.408C128.701 69.168 127.581 66.128 127.581 62.288C127.581 61.264 129.309 46.064 132.765 16.688C133.661 9.136 136.061 4.368 139.965 2.384C141.757 1.424 143.901 0.943996 146.397 0.943996C154.845 0.943996 159.069 4.848 159.069 12.656C159.069 13.296 159.037 13.968 158.973 14.672C158.333 23.248 152.957 31.984 142.845 40.88C142.525 44.016 142.173 47.056 141.789 50C141.021 56.592 140.637 60.24 140.637 60.944C140.637 64.272 142.077 65.936 144.957 65.936C148.093 65.936 151.005 64.144 153.693 60.56C156.445 56.912 158.557 52.272 160.029 46.64C160.605 46.832 161.405 47.376 162.429 48.272C163.453 49.104 164.157 49.84 164.541 50.48C163.517 55.792 161.213 60.88 157.629 65.744C155.837 68.24 153.565 70.288 150.813 71.888C147.677 73.744 144.125 74.672 140.157 74.672ZM143.901 31.28C149.789 24.816 152.733 19.024 152.733 13.904C152.733 10.832 151.581 9.296 149.277 9.296C147.805 9.424 146.813 10.384 146.301 12.176C145.853 13.968 145.405 16.88 144.957 20.912C144.573 24.944 144.317 27.44 144.189 28.4L143.901 31.28ZM186.685 41.456C186.685 37.296 184.829 35.216 181.117 35.216C178.365 35.216 175.901 36.784 173.725 39.92C171.421 43.312 170.269 47.28 170.269 51.824C170.269 56.368 171.261 59.888 173.245 62.384C175.293 64.816 178.077 66.032 181.597 66.032C185.821 66.032 190.269 64.304 194.941 60.848C199.677 57.392 203.485 53.104 206.365 47.984C207.645 48.944 208.893 50.704 210.109 53.264C208.253 56.976 204.797 61.136 199.741 65.744C197.117 68.176 193.853 70.224 189.949 71.888C185.725 73.68 181.501 74.576 177.277 74.576C171.581 74.576 166.749 72.624 162.781 68.72C158.877 64.816 156.925 59.728 156.925 53.456C156.925 45.84 159.485 39.664 164.605 34.928C169.725 30.192 175.453 27.824 181.789 27.824C186.717 27.824 190.621 28.848 193.501 30.896C196.381 32.944 197.821 35.632 197.821 38.96C197.821 41.136 197.053 43.024 195.517 44.624C192.701 47.44 189.277 48.848 185.245 48.848C186.205 45.648 186.685 43.184 186.685 41.456ZM226.789 27.824C232.677 27.824 237.573 29.712 241.477 33.488C245.445 37.264 247.429 41.872 247.429 47.312C247.429 55.568 244.997 62.192 240.133 67.184C235.333 72.112 229.509 74.576 222.661 74.576C215.813 74.576 210.373 72.624 206.341 68.72C202.373 64.816 200.389 59.984 200.389 54.224C200.389 46.16 202.853 39.76 207.781 35.024C212.773 30.224 219.109 27.824 226.789 27.824ZM224.869 35.6C221.861 35.6 219.333 37.328 217.285 40.784C215.237 44.24 214.117 48.592 213.925 53.84C213.925 57.552 214.661 60.624 216.133 63.056C217.669 65.488 219.973 66.704 223.045 66.704C226.117 66.704 228.677 65.008 230.725 61.616C232.837 58.224 233.893 54.352 233.893 50C233.893 45.648 233.157 42.192 231.685 39.632C230.213 36.944 227.941 35.6 224.869 35.6ZM278.584 74L282.232 42.128C282.232 40.336 281.784 38.864 280.888 37.712C280.056 36.496 278.552 35.888 276.376 35.888C274.2 35.888 272.408 36.944 271 39.056C269.592 41.104 268.696 43.28 268.312 45.584C266.072 61.52 264.824 70.992 264.568 74H251.704L256.984 28.88C259.672 28.176 261.72 27.824 263.128 27.824C267.16 27.824 269.368 29.168 269.752 31.856C272.888 29.168 276.312 27.824 280.024 27.824C287.448 27.824 292.184 30.032 294.232 34.448C297.368 29.968 301.848 27.728 307.672 27.728C311.96 27.728 315.352 28.848 317.848 31.088C320.344 33.264 321.592 36.016 321.592 39.344C321.592 40.304 321.4 42 321.016 44.432C319.544 54.032 318.808 59.664 318.808 61.328C318.808 64.336 319.8 65.84 321.784 65.84C323.448 65.84 325.208 64.752 327.064 62.576C328.984 60.336 330.52 56.912 331.672 52.304C333.848 54.608 335.16 56.432 335.608 57.776C332.28 68.912 326.392 74.48 317.944 74.48C313.976 74.48 311.032 73.264 309.112 70.832C307.192 68.4 306.232 65.84 306.232 63.152L308.536 41.936C308.536 40.208 308.088 38.768 307.192 37.616C306.296 36.464 304.856 35.888 302.872 35.888C300.952 35.888 299.256 36.624 297.784 38.096C296.312 39.568 295.288 41.456 294.712 43.76C292.792 60.016 291.544 70.096 290.968 74H278.584ZM346.524 52.496C350.492 51.664 353.436 50.064 355.356 47.696C357.34 45.328 358.332 43.056 358.332 40.88C358.332 38.64 357.724 37.136 356.508 36.368C355.356 35.536 354.076 35.12 352.668 35.12C349.66 35.12 347.004 36.816 344.7 40.208C342.46 43.536 341.34 47.536 341.34 52.208C341.34 56.816 342.428 60.272 344.604 62.576C346.844 64.816 349.596 65.936 352.86 65.936C357.66 65.936 362.268 64.272 366.684 60.944C371.1 57.616 374.684 53.264 377.436 47.888C378.844 49.232 380.124 50.896 381.276 52.88C379.164 57.68 375.42 62.384 370.044 66.992C367.356 69.232 364.156 71.056 360.444 72.464C356.796 73.872 353.02 74.576 349.116 74.576C342.716 74.576 337.66 72.624 333.948 68.72C329.98 64.496 327.996 59.088 327.996 52.496C327.996 45.904 330.46 40.144 335.388 35.216C340.38 30.288 346.332 27.824 353.244 27.824C358.172 27.824 362.172 28.912 365.244 31.088C368.316 33.2 369.884 36.08 369.948 39.728C369.948 44.656 367.964 48.656 363.996 51.728C360.092 54.8 354.716 56.944 347.868 58.16L346.524 52.496Z" fill="white"/>
      </svg>
  </div>
  <div class="my-container">
    <div class="container w-100 d-flex justify-content-center shadow">
      <div class="context-container w-100 h-100">
        <div class="row">
          <div class="col-12">
            <RouterView v-slot="{ Component, route }">
              <transition :name="route.meta.transition">
                <component :is="Component" />
              </transition>
            </RouterView>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="text-container">
    Bubbles
  </div> -->
  <div class="gradient-bg" tabindex="-1">
    <svg xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="goo">
          <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
          <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8" result="goo" />
          <feBlend in="SourceGraphic" in2="goo" />
        </filter>
      </defs>
    </svg>
    <div class="gradients-container" tabindex="-1">
      <div class="g1"></div>
      <div class="g2"></div>
      <div class="g3"></div>
      <div class="g4"></div>
      <div class="g5"></div>
      <div class="interactive"></div>
    </div>
  </div>
</template>

<style scoped>
.my-container{
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.container{
  height: 90vh;
  background-color: transparent;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  background-image: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0.6),
    rgba(201, 201, 201, 0.3)
  );
  border-radius: 20px;
  overflow: hidden;
  border-bottom: #c0c0c0;
  margin-top: 5vh;
  margin-bottom: 5vh;
}

@media (max-width:576px){
  .container{
    height: 100vh;
    margin-top: 0;
    margin-bottom: 0;
    border-radius: 0;
  }
  .nav {
    /* position: relative; */
    height: 100% !important;
  }
  .nav::after {
    position: absolute;
    content: "";
    top: 0;
    left: 0;
    width: 25%;
    height: 100vh !important; /* 設為 100vh */
    border-right: 1px solid wheat;
  }
}

.context-container{
  overflow-y: auto;
  overflow-x: hidden;
  /* scroll-margin-block-start: 1px; */
  scrollbar-width: thin;
  scrollbar-color: #c0c0c0 transparent;
}

.nav{
  padding: 0;
  height: 90vh;
}

.nav::after{
  position: absolute;
  content: "";
  margin-top: 2.5vh;
  margin-bottom: 2.5vh;
  width: 25%;
  height:85vh;
  border-right: 1px solid white;
  z-index: -1;
  filter: blur(1px);
}

.welcome{
  position: fixed;
  height: 100vh;
  width: 100vw;
  z-index: 10;
}

.welcome-text>path{
  fill:transparent;
  stroke: #ffffff;
  stroke-width: 1;
  stroke-dasharray: 515;
  animation: textAnimation 7s ease-in-out forwards;
}

@keyframes textAnimation{
  0%{
    stroke-dashoffset: 515;
  }
  30%{
    fill:transparent;
  }
  50%{
    fill:#ffffff;
    stroke-dashoffset: 0;
  }
  80%{
    opacity: 1;
  }
  100%{
    opacity: 0;
  }
}

.invisible{
  display: none;
}

.fade-enter-active, .fade-leave-active {
  transition: opacity 0.5s;
}
.fade-enter-from, .fade-leave-to {
  opacity: 0;
}


.slide-left-enter-active, .slide-right-enter-active {
  transition: all 0.5s ease;
}
.slide-left-leave-active, .slide-right-leave-active {
  transition: all 0.5s ease;
}

/* slide-left 過渡效果 */
.slide-left-enter-from {
  transform: translateX(100%);
  opacity: 0;
}
.slide-left-leave-to {
  transform: translateX(-100%);
  opacity: 0;
}

/* slide-right 過渡效果 */
.slide-right-enter-from {
  transform: translateX(-100%);
  opacity: 0;
}
.slide-right-leave-to {
  transform: translateX(100%);
  opacity: 0;
}
</style>
